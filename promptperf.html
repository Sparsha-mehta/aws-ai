<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Prompt Performance Optimization - AWS AI Practitioner Study Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A complete and motivating study guide for the AWS Certified AI Practitioner exam">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AWS AI Practitioner Study Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/YOUR_ORG/YOUR_REPO" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="prompt-performance-optimization"><a class="header" href="#prompt-performance-optimization">Prompt Performance Optimization</a></h1>
<h2 id="introduction-to-text-generation-process"><a class="header" href="#introduction-to-text-generation-process">Introduction to Text Generation Process</a></h2>
<p>So now let's talk about how we can improve the performance of our prompts in our model. First, let's step back and remember how text is being generated from an LLM.</p>
<p><img src="image-6.png" alt="alt text" /></p>
<p>For example, we have the sentence: "After the rain, the streets were..." and then we have the next word that will be computed by the Gen-AI Model. We can have wet, flooded, slippery, empty, muddy, clean, blocked, and all of these words have associated probabilities for how likely this is going to be the next picked word.</p>
<p>The Gen-AI Model will do some <strong>probability calculation</strong> and will select a <strong>word randomly</strong>, for example, "flooded"</p>
<p>This is something we've seen and I hope you remember it because now we're going to do a deep dive into that specific process and see how we can slightly influence it.</p>
<h2 id="understanding-the-core-concepts"><a class="header" href="#understanding-the-core-concepts">Understanding the Core Concepts</a></h2>
<p>Before diving in, let us review core concepts:</p>
<h3 id="temperature-vs-top-p-vs-top-k---the-key-differences"><a class="header" href="#temperature-vs-top-p-vs-top-k---the-key-differences"><strong>Temperature vs Top P vs Top K - The Key Differences</strong></a></h3>
<p>Think of it this way: when the AI is choosing the next word, it has a list of possible words with probabilities (like in your first image).</p>
<h4 id="temperature"><a class="header" href="#temperature"><strong>Temperature</strong></a></h4>
<ul>
<li><strong>What it does</strong>: Controls how "random" or "creative" the selection process is</li>
<li><strong>How it works</strong>:
<ul>
<li>Low temperature (0.2) = AI picks the most likely words more often (conservative)</li>
<li>High temperature (1.0) = AI is more willing to pick less likely words (creative/risky)</li>
</ul>
</li>
<li><strong>Think of it as</strong>: The "boldness" setting - how willing is the AI to take chances?</li>
</ul>
<h4 id="top-p"><a class="header" href="#top-p"><strong>Top P</strong></a></h4>
<ul>
<li><strong>What it does</strong>: Limits which words the AI can even consider, based on cumulative probability</li>
<li><strong>How it works</strong>:
<ul>
<li>Low P (0.25) = Only consider words that make up the top 25% of total probability</li>
<li>High P (0.99) = Consider almost all possible words</li>
</ul>
</li>
<li><strong>Think of it as</strong>: The "vocabulary filter" - what percentage of the total probability mass should we include?</li>
</ul>
<h4 id="top-k"><a class="header" href="#top-k"><strong>Top K</strong></a></h4>
<ul>
<li><strong>What it does</strong>: Limits which words the AI can consider, based on a fixed number</li>
<li><strong>How it works</strong>:
<ul>
<li>Low K (10) = Only look at the 10 most likely words</li>
<li>High K (500) = Look at the top 500 most likely words</li>
</ul>
</li>
<li><strong>Think of it as</strong>: The "shortlist size" - how many words should we put on the candidate list?</li>
</ul>
<h4 id="simple-example"><a class="header" href="#simple-example"><strong>Simple Example</strong></a></h4>
<p>If the AI is completing "The sky is..." and has 1000 possible next words:</p>
<ul>
<li><strong>Top K = 10</strong>: Only consider the 10 most likely words (blue, clear, dark, etc.)</li>
<li><strong>Top P = 0.25</strong>: Only consider words that together make up 25% of all probability (might be just 3-4 words)</li>
<li><strong>Temperature = 0.2</strong>: From whichever words made it through Top K/Top P, pick very conservatively (probably "blue")</li>
</ul>
<h2 id="prompt-performance-optimization-parameters"><a class="header" href="#prompt-performance-optimization-parameters"><strong>Prompt Performance Optimization Parameters</strong></a></h2>
<p>Let's go into the prompt performance optimization. This is a screenshot from Amazon Bedrock, and as you can see, we have a few knobs that we can change.
<img src="image-20.png" alt="alt text" /></p>
<h3 id="system-prompts"><a class="header" href="#system-prompts"><strong>System Prompts</strong></a></h3>
<p>We can specify how the model should behave and reply. In my example, I say "reply as if you are a teacher in the AWS Cloud Space." Of course, we set the tone for the answer, and this will really help the LLM to respond the way we want to.</p>
<h3 id="temperature-0-to-1"><a class="header" href="#temperature-0-to-1"><strong>Temperature (0 to 1)</strong></a></h3>
<p>This is a value you set from zero to one that defines the creativity of the model's outputs.</p>
<p>• <strong>Low Temperature (e.g., 0.2)</strong> - The outputs are going to be more conservative, repetitive, and focused on the most likely response (the words with the highest probability)</p>
<p>• <strong>High Temperature (e.g., 1.0)</strong> - The outputs are going to be more diverse, more creative, less predictable, and also maybe less coherent because it's going to select more words that would be less likely over time</p>
<p>It's for you to try and see what temperature works for you, but think at least, like if you have a high temperature, everything moves and so therefore you have more creativity.</p>
<h3 id="top-p-0-to-1"><a class="header" href="#top-p-0-to-1"><strong>Top P (0 to 1)</strong></a></h3>
<p>Top P is a value again, from zero to one.</p>
<p>• <strong>Low P (e.g., 0.25)</strong> - In the list that we saw before about the next word that can be selected, we will only consider the 25% most likely words. Therefore, we'll have a more coherent response because we only select the words that really make sense.</p>
<p>• <strong>High P (e.g., 0.99)</strong> - We're going to consider a very broad range of possible words, and therefore we have a long list to choose from, so possibly we're going to get a more creative and more diverse output.</p>
<p>As you can see, Temperature, Top P, and then of course, Top K and all the rest of these parameters can be used together.</p>
<h3 id="top-k-1"><a class="header" href="#top-k-1"><strong>Top K</strong></a></h3>
<p>Top K is the limit of the number of probable words. While Top P is considering the most likely words as a distribution, Top K is a number.<br><br></p>
<p>• <strong>Low K (e.g., 10)</strong> - You're going to get the top 10 most probable words. You're going to get probably a more coherent response.<br><br></p>
<p>• <strong>High K (e.g., 500)</strong> - You're going to consider the top 500 words. Therefore there's a chance if one of them is selected, that you get a more diverse and more creative answer.<br><br></p>
<h3 id="length"><a class="header" href="#length"><strong>Length</strong></a></h3>
<p>We define what is the maximum length of the answer. We tell the model to stop at some point.</p>
<h3 id="stop-sequences"><a class="header" href="#stop-sequences"><strong>Stop Sequences</strong></a></h3>
<p>What are some of the tokens that will signal the model to stop generating outputs? If the model has that token, then it stops.</p>
<h2 id="exam-preparation-note"><a class="header" href="#exam-preparation-note"><strong>Exam Preparation Note</strong></a></h2>
<blockquote>
<p>From an exam perspective, you need to remember the definition of all of these, what they mean for low and high values. So remember: <strong>Temperature</strong>, <strong>Top P</strong>, <strong>Top K</strong>, <strong>length</strong>, <strong>system prompts</strong>, and <strong>stop sequences</strong>.</p>
</blockquote>
<h2 id="prompt-latency"><a class="header" href="#prompt-latency"><strong>Prompt Latency</strong></a></h2>
<p>What about prompt latency? Well, latency means <em><strong>how fast the model is going to respond to your inputs</strong></em>.</p>
<h3 id="factors-that-impact-latency"><a class="header" href="#factors-that-impact-latency"><strong>Factors That Impact Latency:</strong></a></h3>
<p>• <strong>Model size</strong> - How big or how small the model is<br><br></p>
<p>• <strong>Model type</strong> - For example, Llama is going to show different performance than Claude<br><br></p>
<p>• <strong>Number of tokens in the input</strong> - The more context you give in the context window, the slower it's going to be<br><br></p>
<p>• <strong>Output size</strong> - The bigger the output, the slower as well it's going to be<br><br></p>
<h3 id="important-note-about-latency"><a class="header" href="#important-note-about-latency"><strong>Important Note About Latency</strong></a></h3>
<p>These are very important factors, but you should know as well that <strong>latency is NOT impacted by Top P, Top K, or the Temperature parameters</strong>. It's good for you to know because the exam may ask you some questions about it.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="promptengg-handson.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="promptperf-handson.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="promptengg-handson.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="promptperf-handson.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
