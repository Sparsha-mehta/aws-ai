# Amazon Bedrock Agents

Now let's talk about Amazon Bedrock Agents. The agent is going to be a very smart thing that is going to act a little bit like a human. 

The idea is that instead of just asking questions to a model, now the model is going to be able to start thinking a little bit and to **perform various multi-step tasks**. These tasks may have an impact on our own databases or our own infrastructure. So the agent can actually **create infrastructure**, **deploy applications**, and **perform operations on our systems**.

## **Key Capabilities**

The agent doesn't just provide us information - it also starts to think and act. For example, it's going to:

- Look at tasks and perform them in the correct order
- Ensure that the correct information is passed within the task even if we haven't programmed the agent to do so
- Automatically integrate with other systems, services, databases, and APIs to exchange data or initiate actions
- Use RAG to retrieve information when necessary to get unlabeled data out of your systems

## **How Agents Work**

### **Agent Configuration**
In Amazon Bedrock, you create an agent and define what the agent is responsible for. For example: "You are an agent responsible for accessing purchase history for our customers as well as recommendations into what they can purchase next. And you are responsible for placing new orders."

The agent knows that it can do all these things, so if the user is asking something for the agent or the model to do one of these things, Bedrock is smart - it's going to say, well, this agent probably is going to be responsible for these actions.

### **Action Groups**
We create what's called action groups, and the agents are configured to understand what these action groups do and what they mean. There are two ways to set up action groups:

#### **1. External APIs**
- Define APIs as a way to interface with your system
- Examples: get recent purchases, get recommended purchases, get purchase details for a specific purchase ID
- All these things are known to the agent in terms of what is the expected input for these APIs, what do these APIs do, and what is the documentation around it
- All this is provided thanks to an OpenAPI schema
- When done well, the agent can invoke these and behind the scenes interact with your backend systems, for example, make changes to your database

#### **2. Lambda Functions**
- Lambda functions are a way to run a little bit of code in AWS without provisioning infrastructure
- Lambda functions can be used to create and place an order through a Lambda function
- Could use the same database or a new database
- The agent can interact either with an external API or with Lambda functions on your AWS accounts

### **Knowledge Bases**
The agent also has access to knowledge bases that we define. For example, say we have a knowledge base around our company shipping policy and return policy. If the user is asking something about the return policy for an order it's about to do, the agent is smart enough to also provide that to the user.

## **Behind the Scenes Process**

Here's how it works when we give a task to a Bedrock agent:

### **Step 1: Analysis**
The agent looks at:
- The prompt
- All the conversation history
- All the actions available
- The knowledge bases
- What are these structures and what is the task

### **Step 2: Planning**
It takes all this information together and sends it to a Generative AI model backed by Amazon Bedrock and says, "Please tell me how you would proceed to perform these actions given all this information."

### **Step 3: Chain of Thought**
The output of the Bedrock model is going to be a list of steps using chain of thought:
1. Step one: you need to do this
2. Step two: do this
3. Step three: do this
4. Step N: last step, do that

### **Step 4: Execution**
The steps are executed by the agent:
- First one: call an API, call on this action group and get the results
- Step two: do it again
- Step three: call another API
- Maybe it could be a search into a knowledge base and get the results

The agent works and does all these things for us thanks to the steps that were generated by the Bedrock model.

### **Step 5: Final Response**
The final result is returned to the Bedrock agent. The Bedrock agent then sends the tasks and the results to another Bedrock model. The Bedrock model synthesizes everything and gives a final response to our user.

## **Debugging and Tracing**

This is all happening behind the scenes. Of course, we just use the agent, and the agent does stuff and automatically we see the final response. But Bedrock is really nice because you actually have something called **tracing** on your agent, and this allows you to see the list of steps that were done by the agent. So you can debug in case you don't like the way an agent performed something.

---

The agents are very smart, and they know what to access and then automatically will know how to do it. That's it for Amazon Bedrock Agents.